<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GSoC 2025 – Final Work Report</title>

    <!--Prism.js CSS for Syntax Highlighting-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/plugins/autolinker/prism-autolinker.min.js"
      rel="stylesheet"
    />
    <!-- Diff2Html CSS for Git Diff Styling -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/diff2html/dist/diff2html.min.css"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>GSoC 2025 – Final Work Report</h1>
      <p>Swaminath Shiju | LPython</p>
      <p>25 May to 17 August</p>
    </header>

    <main>
      <h1>Google Summer of Code 2025 Final Report</h1>
      <p>
        <strong>Student:</strong> Swaminath Shiju <br />
        <strong>Project:</strong> Expanding OOP capabilities of LPython for
        porting common CPython modules <br />
        <strong>Organisation:</strong> Python Software Foundation <br />
        <strong>Mentor:</strong>
        <a href="https://github.com/certik" target="_blank">Ondřej Čertík</a>
        <br />
        <strong>Weekly Reports:</strong>
        <a href="./gsoc25.html#reports">Link to weekly reports</a>
        <br />
      </p>
      <div id="abstract" class="report-section">
        <h2>Abstract</h2>
        <p>
          The original goal was to enhance LPython’s object-oriented programming
          (OOP) capabilities by implementing dunder methods and supporting
          non-dataclass imports. However, due to significant updates in LPython
          and its shared backend with LFortran, the project scope was revised
          during the bonding period in consultation with my mentor.
        </p>
        <p>
          The revised objective focused on implementing Python-style container
          types (lists, sets, dictionaries, and tuples) in LFortran’s frontend
          and runtime. This effort improved test coverage for Python-specific
          backend components, ensured smoother synchronization with LPython’s
          <code>libasr</code> backend, and supported a major synchronization
          cycle.
        </p>
        <p>
          The project spanned frontend syntax, backend code generation, and data
          structure intrinsics.
        </p>
      </div>

      <section id="toc">
        <h2>Table of Contents</h2>
        <ul>
          <li><a href="#deliverables">Final Deliverables</a></li>
          <li><a href="#timeline">Timeline Summary</a></li>
          <li><a href="#contribs">List of Contributions (PRs)</a></li>
          <li><a href="#future">Future Work</a></li>
          <li><a href="#ack">Acknowledgements</a></li>
        </ul>
      </section>

      <section id="deliverables">
        <h2>Final Deliverables</h2>
        <ul>
          <li>
            Implemented and stabilized Python-like container types (list, set,
            dict, tuple) in LFortran’s frontend and runtime.
          </li>
          <li>
            Refactored backend to reduce reliance on deprecated mechanisms and
            prepared for string/struct changes.
          </li>
          <li>
            Introduced and iterated on Union types: syntax, access, and ASR
            refactor.
          </li>
          <li>
            Improved C backend behavior (string arguments, dict copy) and
            enabled robust unsigned integer support.
          </li>
          <li>
            Unblocked and synchronized LPython with latest libasr changes;
            restored integration tests.
          </li>
        </ul>
      </section>

      <section id="timeline">
        <h2>Timeline Summary</h2>
        <table>
          <thead>
            <tr>
              <th>Week</th>
              <th>Key Achievements</th>
            </tr>
          </thead>
          <tbody>
            <!-- Example row -->
            <tr>
              <td>
                <strong>Week 1</strong><br /><span class="meta"
                  >[25/5 - 1/6]</span
                >
              </td>
              <td>
                <ul>
                  <li>Initial list/set syntax implementation</li>
                  <li>First tests in frontend & runtime</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 2</strong
                ><span class="meta"><br />[1/6 - 8/6]</span>
              </td>
              <td>
                <ul>
                  <li>Improved syntax for lists and sets</li>
                  <li>Added for tests to update backend</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 3</strong
                ><span class="meta"><br />[8/6 - 15/6]</span>
              </td>
              <td>
                <ul>
                  <li>Fully ported several LPython List tests</li>
                  <li>Proper syntax for dicts and tuples implemented</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 4</strong
                ><span class="meta"><br />[15/6 - 22/6]</span>
              </td>
              <td>
                <ul>
                  <li>
                    Completely ported all tuple tests & several list tests
                  </li>
                  <li>Simplified syntax for LP types</li>
                  <li>Backend refactoring</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 5</strong
                ><span class="meta"><br />[22/6 - 29/6]</span>
              </td>
              <td>
                <ul>
                  <li>Fixed string-type keys in dict type</li>
                  <li>Exposed Union type in LF frontend</li>
                  <li>Optimized list.pop</li>
                  <li>
                    Refactored backed for less reliance on create_gep, typecode
                  </li>
                  <li>Successfully merged a month long sync PR for LPython</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 6</strong><br /><span class="meta"
                  >[29/6 - 6/7]</span
                >
              </td>
              <td>
                <ul>
                  <li>Implemented Union type access</li>
                  <li>Union ASR type refactor</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 7</strong><br /><span class="meta"
                  >[6/7 - 13/7]</span
                >
              </td>
              <td>
                <ul>
                  <li>Fixed Unsigned integer properly in libasr</li>
                  <li>Made progress towards having C-introp working in LP</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 8</strong><br /><span class="meta"
                  >[13/7 - 20/7]</span
                >
              </td>
              <td>
                <ul>
                  <li>
                    Began work on fixing more complicated bugs in post sync LP
                  </li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 9</strong><br /><span class="meta"
                  >[20/7 - 27/7]</span
                >
              </td>
              <td>
                <ul>
                  <li>Uint in LF frontend</li>
                  <li>Test coverage for Uint</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 10</strong><br /><span class="meta"
                  >[27/7 - 3/8]</span
                >
              </td>
              <td>
                <ul>
                  <li>Uncommented several Integration tests in LP</li>
                  <li>Union refactor</li>
                  <li>Fixed list regression after string refactor</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 11</strong><br /><span class="meta"
                  >[3/8 - 10/8]</span
                >
              </td>
              <td>
                <ul>
                  <li>
                    Began work on large scale LP sync after struct and string
                    refactors in LF backend
                  </li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <strong>Week 12</strong><br /><span class="meta"
                  >[10/8 - 17/8]</span
                >
              </td>
              <td>
                <ul>
                  <li>Finishied sync to a large extent</li>
                  <li>Fixed Dict regression after string refactor</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="contribs">
        <h2>List of Contributions (PRs)</h2>
        <ul>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7419"
              class="pr-link"
              target="_blank"
            >
              #7419 List implementation
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7459"
              class="pr-link"
              target="_blank"
            >
              #7459 Misc PR towards compiling toml-f
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7462"
              class="pr-link"
              target="_blank"
            >
              #7462 Set implementation
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7529"
              class="pr-link"
              target="_blank"
            >
              #7529 More List intrinsics
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7594"
              class="pr-link"
              target="_blank"
            >
              #7594 Improved syntax
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7621"
              class="pr-link"
              target="_blank"
            >
              #7621 Simple dict implementation
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7653"
              class="pr-link"
              target="_blank"
            >
              #7643 List intrinsics/tests - 1
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7660"
              class="pr-link"
              target="_blank"
            >
              #7660 List intrinsics/tests - 2
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7671"
              class="pr-link"
              target="_blank"
            >
              #7671 List intrinsics/tests - 3
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7684"
              class="pr-link"
              target="_blank"
            >
              #7684 Parser changes and Tuple,Dict type
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7698"
              class="pr-link"
              target="_blank"
            >
              #7698 Parser Shift/Reduce conflict resolution
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7763"
              class="pr-link"
              target="_blank"
            >
              #7763 Implemented tests for new syntax
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7799"
              class="pr-link"
              target="_blank"
            >
              #7799 Refactored function names
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7807"
              class="pr-link"
              target="_blank"
            >
              #7807 Ported tuple tests
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7813"
              class="pr-link"
              target="_blank"
            >
              #7813 Ported dict tests
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7873"
              class="pr-link"
              target="_blank"
            >
              #7873 Misc fixes for tuple types
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7896"
              class="pr-link"
              target="_blank"
            >
              #7896 Implemented support for string key in dict type
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7898"
              class="pr-link"
              target="_blank"
            >
              #7898 Optimized list pop
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7901"
              class="pr-link"
              target="_blank"
            >
              #7901 Refactored backend for less reliance on typecodes
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7909"
              class="pr-link"
              target="_blank"
            >
              #7909 Exposed the Union type to LFortran
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7912"
              class="pr-link"
              target="_blank"
            >
              #7912 Refactored backend for less reliance on create_gep
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7935"
              class="pr-link"
              target="_blank"
            >
              #7935 Union access implemented
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/7966"
              class="pr-link"
              target="_blank"
            >
              #7966 Union ASR Refactor
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8002"
              class="pr-link"
              target="_blank"
            >
              #8002 LP type - argument handling in C backend
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8011"
              class="pr-link"
              target="_blank"
            >
              #8011 C backend dict-copy fix
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8034"
              class="pr-link"
              target="_blank"
            >
              #8034 Support unsigned integer in LF
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8037"
              class="pr-link"
              target="_blank"
            >
              #8037 Proper handling of string argument in C backend
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8055"
              class="pr-link"
              target="_blank"
            >
              #8055 Unsigned int print fix
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8132"
              class="pr-link"
              target="_blank"
            >
              #8132 Fixing list regression after string refactor
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8149"
              class="pr-link"
              target="_blank"
            >
              #8149 Uint frontent
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8301"
              class="pr-link"
              target="_blank"
            >
              #8301 Sync
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lfortran/lfortran/pull/8359"
              class="pr-link"
              target="_blank"
            >
              #8359 Fix for dict regression
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lcompilers/lpython/pull/2840"
              class="pr-link"
              target="_blank"
            >
              #2840 Syncing LPython to latest libasr
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lcompilers/lpython/pull/2862"
              class="pr-link"
              target="_blank"
            >
              #2862 Fixed unsigned integer tests
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lcompilers/lpython/pull/2863"
              class="pr-link"
              target="_blank"
            >
              #2863 String arguments fix
            </a>
          </li>
          <li>
            <a
              href="https://github.com/lcompilers/lpython/pull/2866"
              class="pr-link"
              target="_blank"
            >
              #2866 Sync
            </a>
          </li>
        </ul>
      </section>

      <section id="current">
        <h2>Current State</h2>
        <ul>
          <li>
            LPython’s continuous integration (CI) supports approximately 200
            tests with the latest <code>libasr</code> backend.
          </li>
          <li>
            Ported all tuple tests and nearly all list, set, and dictionary
            tests to LFortran. Most tests affected by the backend string
            refactoring broke. I fixed list tests and all but one dictionary
            test fixed.
          </li>
          <li>
            Adapted the LPython frontend to align with recent backend
            refactoring efforts.
          </li>
        </ul>
      </section>

      <section id="future">
        <h2>Future Work</h2>
        <ul>
          <li>
            Complete LPython synchronization to achieve approximately 300
            passing tests, integrating LFortran-specific features as tests to
            prevent backend changes from breaking LPython.
          </li>
          <li>
            Implement dunder methods and non-dataclass imports in LPython,
            aligning with the original project goals.
          </li>
          <li>
            Begin porting additional CPython standard library modules to
            LPython.
          </li>
          <li>Benchmark performance using Advent of Code 2025 challenges.</li>
        </ul>
      </section>
      <section id="learn">
        <h2>Learnings</h2>
        <ul>
          <li>
            Before I started committing to the project I had little to no
            experience with the LLVM toolchain - but along the course of the
            project I have picked up a good amount of LLVM fundamentals to begin
            exploring on my own.
          </li>
          <li>
            I've learnt how to use tools like lldb to help debug large complex
            projects
          </li>
          <li>
            I've also learnt how to effectively communicate with other
            open-source contributors in the community.
          </li>
          <li>
            With my college semester starting in the final 3–4 weeks of the
            program, I developed effective time management skills to balance
            academic responsibilities and project commitments.
          </li>
          <li>Git version control, bison, flex, conda, mambda etc</li>
        </ul>
      </section>
      <section id="ack">
        <h2>Acknowledgements</h2>
        <p>
          Thanks to my mentor
          <a href="https://github.com/certik" target="_blank">Ondřej Čertík</a>,
          the LFortran/LPython community, and PSF GSoC coordinators for
          accepting me into this program and providing guidance and reviews
          throughout the project.
        </p>
      </section>
    </main>

    <footer>
      <p>GSoC Final Work Report | Python Software Foundation</p>
    </footer>
  </body>
</html>
